<div id="profile-form" class="block">
  <form hx-put="/profile" hx-target="#profile-info" hx-swap="innerHTML">

    <div class="field">
      <label class="label" for="name">Name</label>
      <div class="control">
        <input class="input" type="text" id="name" name="name" placeholder="Name" value="{{profile.name}}" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="bio">Bio</label>
      <div class="control">
        <textarea class="textarea" id="bio" name="bio" placeholder="Bio">{{profile.bio}}</textarea>
      </div>
    </div>

    <div class="field">
      <label class="label" for="conduit_briefing">Conduit Briefing</label>
      <div class="control">
        <textarea class="textarea" id="conduit_briefing" name="conduit_briefing" placeholder="Share updates and information with your players...">{{profile.conduit_briefing}}</textarea>
      </div>
      <p class="help">Use this space to communicate important information to players in your games.</p>
    </div>

    <div class="field">
      <label class="label" for="image_url">Image URL</label>
      <div class="control">
        <input class="input" type="url" id="image_url" name="image_url" placeholder="Image URL"
          value="{{profile.image_url}}">
      </div>
      <p class="help">Paste a link to your image. We'll crop it visually without uploading anything.</p>
    </div>

    <div class="field">
      <label class="label">Image Crop &amp; Preview</label>
      <div class="profile-image-editor" data-image-cropper data-image-input="#image_url" data-crop-input="#image_crop">
        <div class="profile-image-editor__canvas">
          <img data-cropper-image src="{{profile.image_url}}" alt="Profile image cropper">
          <div class="profile-image-editor__placeholder" data-crop-placeholder {{#if profile.image_url}}hidden{{/if}}>Add an image URL to start cropping</div>
        </div>
        <div class="profile-image-editor__preview" data-crop-preview aria-label="Profile image preview"></div>
      </div>
      <input type="hidden" id="image_crop" name="image_crop" value='{{{json profile.image_crop}}}'>
      <p class="help">Drag the crop marks to choose what shows on your public profile. Only the crop coordinates are saved.</p>
    </div>

    <div class="field">
      <label class="checkbox">
        <input type="checkbox" name="is_public" {{#if profile.is_public}}checked{{/if}}>
        Make profile public
      </label>
    </div>

    <hr/>

    <div class="field">
      <label class="label" for="email">Email</label>
      <div class="control">
        <input class="input" type="email" id="email" name="email" placeholder="Email" value="{{user.email}}" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="password">New Password</label>
      <div class="control">
        <input class="input" type="password" id="password" name="password"
          placeholder="New Password (leave blank to keep current)">
      </div>
      <p class="help">Leave blank to keep current password</p>
    </div>

    <div class="field">
      <label class="label" for="timezone">Timezone</label>
      <div class="control">
        <div class="select">
          <select id="timezone" name="timezone">
            <option value="UTC" {{#if (eq profile.timezone "UTC")}}selected{{/if}}>UTC</option>
            <option value="America/New_York" {{#if (eq profile.timezone "America/New_York")}}selected{{/if}}>Eastern Time</option>
            <option value="America/Chicago" {{#if (eq profile.timezone "America/Chicago")}}selected{{/if}}>Central Time</option>
            <option value="America/Denver" {{#if (eq profile.timezone "America/Denver")}}selected{{/if}}>Mountain Time</option>
            <option value="America/Los_Angeles" {{#if (eq profile.timezone "America/Los_Angeles")}}selected{{/if}}>Pacific Time</option>
            <option value="Africa/Cairo" {{#if (eq profile.timezone "Africa/Cairo")}}selected{{/if}}>Africa/Cairo</option>
            <option value="Africa/Johannesburg" {{#if (eq profile.timezone "Africa/Johannesburg")}}selected{{/if}}>Africa/Johannesburg</option>
            <option value="Africa/Lagos" {{#if (eq profile.timezone "Africa/Lagos")}}selected{{/if}}>Africa/Lagos</option>
            <option value="America/Anchorage" {{#if (eq profile.timezone "America/Anchorage")}}selected{{/if}}>America/Anchorage</option>
            <option value="America/Argentina/Buenos_Aires" {{#if (eq profile.timezone "America/Argentina/Buenos_Aires")}}selected{{/if}}>America/Argentina/Buenos_Aires</option>
            <option value="America/Bogota" {{#if (eq profile.timezone "America/Bogota")}}selected{{/if}}>America/Bogota</option>
            <option value="America/Caracas" {{#if (eq profile.timezone "America/Caracas")}}selected{{/if}}>America/Caracas</option>
            <option value="America/Halifax" {{#if (eq profile.timezone "America/Halifax")}}selected{{/if}}>America/Halifax</option>
            <option value="America/Mexico_City" {{#if (eq profile.timezone "America/Mexico_City")}}selected{{/if}}>America/Mexico_City</option>
            <option value="America/Phoenix" {{#if (eq profile.timezone "America/Phoenix")}}selected{{/if}}>America/Phoenix</option>
            <option value="America/Santiago" {{#if (eq profile.timezone "America/Santiago")}}selected{{/if}}>America/Santiago</option>
            <option value="America/Sao_Paulo" {{#if (eq profile.timezone "America/Sao_Paulo")}}selected{{/if}}>America/Sao_Paulo</option>
            <option value="Asia/Baghdad" {{#if (eq profile.timezone "Asia/Baghdad")}}selected{{/if}}>Asia/Baghdad</option>
            <option value="Asia/Bangkok" {{#if (eq profile.timezone "Asia/Bangkok")}}selected{{/if}}>Asia/Bangkok</option>
            <option value="Asia/Dhaka" {{#if (eq profile.timezone "Asia/Dhaka")}}selected{{/if}}>Asia/Dhaka</option>
            <option value="Asia/Dubai" {{#if (eq profile.timezone "Asia/Dubai")}}selected{{/if}}>Asia/Dubai</option>
            <option value="Asia/Hong_Kong" {{#if (eq profile.timezone "Asia/Hong_Kong")}}selected{{/if}}>Asia/Hong_Kong</option>
            <option value="Asia/Jakarta" {{#if (eq profile.timezone "Asia/Jakarta")}}selected{{/if}}>Asia/Jakarta</option>
            <option value="Asia/Jerusalem" {{#if (eq profile.timezone "Asia/Jerusalem")}}selected{{/if}}>Asia/Jerusalem</option>
            <option value="Asia/Karachi" {{#if (eq profile.timezone "Asia/Karachi")}}selected{{/if}}>Asia/Karachi</option>
            <option value="Asia/Kolkata" {{#if (eq profile.timezone "Asia/Kolkata")}}selected{{/if}}>Asia/Kolkata</option>
            <option value="Asia/Manila" {{#if (eq profile.timezone "Asia/Manila")}}selected{{/if}}>Asia/Manila</option>
            <option value="Asia/Seoul" {{#if (eq profile.timezone "Asia/Seoul")}}selected{{/if}}>Asia/Seoul</option>
            <option value="Asia/Shanghai" {{#if (eq profile.timezone "Asia/Shanghai")}}selected{{/if}}>Asia/Shanghai</option>
            <option value="Asia/Singapore" {{#if (eq profile.timezone "Asia/Singapore")}}selected{{/if}}>Asia/Singapore</option>
            <option value="Asia/Tokyo" {{#if (eq profile.timezone "Asia/Tokyo")}}selected{{/if}}>Asia/Tokyo</option>
            <option value="Australia/Adelaide" {{#if (eq profile.timezone "Australia/Adelaide")}}selected{{/if}}>Australia/Adelaide</option>
            <option value="Australia/Brisbane" {{#if (eq profile.timezone "Australia/Brisbane")}}selected{{/if}}>Australia/Brisbane</option>
            <option value="Australia/Melbourne" {{#if (eq profile.timezone "Australia/Melbourne")}}selected{{/if}}>Australia/Melbourne</option>
            <option value="Australia/Perth" {{#if (eq profile.timezone "Australia/Perth")}}selected{{/if}}>Australia/Perth</option>
            <option value="Australia/Sydney" {{#if (eq profile.timezone "Australia/Sydney")}}selected{{/if}}>Australia/Sydney</option>
            <option value="Europe/Amsterdam" {{#if (eq profile.timezone "Europe/Amsterdam")}}selected{{/if}}>Europe/Amsterdam</option>
            <option value="Europe/Athens" {{#if (eq profile.timezone "Europe/Athens")}}selected{{/if}}>Europe/Athens</option>
            <option value="Europe/Berlin" {{#if (eq profile.timezone "Europe/Berlin")}}selected{{/if}}>Europe/Berlin</option>
            <option value="Europe/Istanbul" {{#if (eq profile.timezone "Europe/Istanbul")}}selected{{/if}}>Europe/Istanbul</option>
            <option value="Europe/London" {{#if (eq profile.timezone "Europe/London")}}selected{{/if}}>Europe/London</option>
            <option value="Europe/Madrid" {{#if (eq profile.timezone "Europe/Madrid")}}selected{{/if}}>Europe/Madrid</option>
            <option value="Europe/Moscow" {{#if (eq profile.timezone "Europe/Moscow")}}selected{{/if}}>Europe/Moscow</option>
            <option value="Europe/Paris" {{#if (eq profile.timezone "Europe/Paris")}}selected{{/if}}>Europe/Paris</option>
            <option value="Europe/Rome" {{#if (eq profile.timezone "Europe/Rome")}}selected{{/if}}>Europe/Rome</option>
            <option value="Pacific/Auckland" {{#if (eq profile.timezone "Pacific/Auckland")}}selected{{/if}}>Pacific/Auckland</option>
            <option value="Pacific/Fiji" {{#if (eq profile.timezone "Pacific/Fiji")}}selected{{/if}}>Pacific/Fiji</option>
            <option value="Pacific/Honolulu" {{#if (eq profile.timezone "Pacific/Honolulu")}}selected{{/if}}>Pacific/Honolulu</option>
          </select>
        </div>
      </div>
    </div>

    <div class="field is-grouped">
      <div class="control">
        <button class="button is-primary" type="submit" hx-indicator="this">Update Profile</button>
      </div>
      <div class="control">
        <a class="button is-light" href="/profile" hx-target="body" hx-swap="innerHTML">Cancel</a>
      </div>
    </div>
  </form>
</div>
